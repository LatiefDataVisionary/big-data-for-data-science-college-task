graph LR
    %% ======================================================================
    %% Global Style Definitions - More Robust & Customizable
    %% ======================================================================
    classDef defaultNode fill:#ECEFF1,stroke:#607D8B,stroke-width:2px,color:#37474F,border-radius:8px,padding:10px,font-family:Arial;
    %% classDef titleText font-size:16px,font-weight:bold,fill:transparent,stroke:none; %% For separate title nodes (REMOVED FOR DEBUGGING)

    classDef phaseBox fill:#FAFAFA,stroke:#BDBDBD,stroke-width:1.5px,rx:10,ry:10; %% For subgraph styling

    classDef iconText color:#263238,font-size:14px;
    classDef detailText color:#546E7A,font-size:12px;

    classDef dsNode fill:#E3F2FD,stroke:#2196F3,color:#1976D2;       %% Datasource: Light Blue
    classDef ingestNode fill:#E8F5E9,stroke:#4CAF50,color:#388E3C;   %% Ingestion: Light Green
    classDef storeNode fill:#FFF3E0,stroke:#FF9800,color:#F57C00;    %% Storage: Light Orange
    classDef preprocessNode fill:#FCE4EC,stroke:#E91E63,color:#C2185B; %% Preprocessing: Light Pink
    classDef featureNode fill:#F3E5F5,stroke:#9C27B0,color:#7B1FA2;    %% Feature Eng: Light Purple
    classDef splitNode fill:#E0F2F1,stroke:#009688,color:#00796B;     %% Splitting: Light Teal
    classDef trainNode fill:#FFFDE7,stroke:#FFEB3B,color:#FBC02D;    %% Training: Light Yellow
    classDef evalNode fill:#E1F5FE,stroke:#03A9F4,color:#0288D1;     %% Evaluation: Light Cyan
    classDef vizNode fill:#F9FBE7,stroke:#CDDC39,color:#AFB42B;      %% Visualization: Light Lime
    classDef insightNode fill:#EDE7F6,stroke:#673AB7,color:#512DA8;  %% Insights: Deep Purple

    %% ======================================================================
    %% Phase 1: Data Acquisition & Initial Storage
    %% ======================================================================
    subgraph phase1 [ ]
        style phase1 fill:#F1F8E9,stroke:#AED581,stroke-width:2px,rx:10,ry:10 %% Custom subgraph style

        A["<div style='font-size:24px;'>üíæ</div><div style='font-weight:bold; font-size:15px; margin-top:5px;'>DATA SOURCE</div><div style='font-size:12px; color:#555;'>NYC Taxi CSV (Kaggle)</div>"]:::dsNode;
        B["<div style='font-size:24px;'>üì•</div><div style='font-weight:bold; font-size:15px; margin-top:5px;'>DATA INGESTION</div><div style='font-size:12px; color:#555;'>Python, Pandas `read_csv`</div>"]:::ingestNode;
        C["<div style='font-size:24px;'>üóÑÔ∏è</div><div style='font-weight:bold; font-size:15px; margin-top:5px;'>DATA STORAGE</div><div style='font-size:12px; color:#555;'>Local Disk (Sim. HDFS)</div>"]:::storeNode;

        A --o B; 
        B --x C; 
    end


    %% ======================================================================
    %% Phase 2: Data Cleansing & Feature Creation
    %% ======================================================================
    subgraph phase2 [ ]
        style phase2 fill:#FFF8E1,stroke:#FFD180,stroke-width:2px,rx:10,ry:10

        D["<div style='font-size:24px;'>üßπ</div><div style='font-weight:bold; font-size:15px; margin-top:5px;'>PREPROCESSING</div><div style='font-size:12px; color:#555;'>Cleaning, Transformation</div>"]:::preprocessNode;
        E["<div style='font-size:24px;'>‚ú®</div><div style='font-weight:bold; font-size:15px; margin-top:5px;'>FEATURE ENGINEERING</div><div style='font-size:12px; color:#555;'>`trip_duration`, Time Features</div>"]:::featureNode;

        D ==> E; 
    end

    %% ======================================================================
    %% Phase 3: Model Development & Assessment
    %% ======================================================================
    subgraph phase3 [ ]
        style phase3 fill:#E3F2FD,stroke:#90CAF9,stroke-width:2px,rx:10,ry:10

        F{"<div style='font-size:24px;'>‚ûó</div><div style='font-weight:bold; font-size:15px; margin-top:5px;'>DATA SPLITTING</div><div style='font-size:12px; color:#555;'>Train/Test Sets</div>"}:::splitNode;
        G["<div style='font-size:24px;'>üß†</div><div style='font-weight:bold; font-size:15px; margin-top:5px;'>MODEL TRAINING</div><div style='font-size:12px; color:#555;'>Random Forest</div>"]:::trainNode;
        H["<div style'font-size:24px;'>‚úÖ</div><div style='font-weight:bold; font-size:15px; margin-top:5px;'>MODEL EVALUATION</div><div style='font-size:12px; color:#555;'>MSE, RMSE, R¬≤</div>"]:::evalNode;

        F -- "Train Data" --> G;
        F -. "Test Data" .-> H; 
        G -- "Approval?" --- H;  
    end

    %% ======================================================================
    %% Phase 4: Outcome Visualization & Knowledge Extraction
    %% ======================================================================
    subgraph phase4 [ ]
        style phase4 fill:#FCE4EC,stroke:#F8BBD0,stroke-width:2px,rx:10,ry:10

        I["<div style='font-size:24px;'>üìä</div><div style='font-weight:bold; font-size:15px; margin-top:5px;'>VISUALIZATION</div><div style='font-size:12px; color:#555;'>Charts, Plots</div>"]:::vizNode;
        J["<div style='font-size:24px;'>üí°</div><div style='font-weight:bold; font-size:15px; margin-top:5px;'>ANALYSIS & INSIGHTS</div><div style='font-size:12px; color:#555;'>Interpretation</div>"]:::insightNode;

        I .-> J; 
    end

    %% ======================================================================
    %% Inter-Phase Connections (Clearer Separation)
    %% ======================================================================
    C ~~~ D;  
    E ==> F;  
    H ==> I;  


    %% ======================================================================
    %% Optional: Global Link Styling
    %% ======================================================================
    linkStyle default stroke:#757575,stroke-width:1.5px,color:blue;
